(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,13672,e=>{e.v("/minesweeper/_next/static/media/bomb.8b152eb2.svg")},38542,e=>{e.v("/minesweeper/_next/static/media/timer.10359921.svg")},51633,e=>{e.v("/minesweeper/_next/static/media/redFlag.acbdf8b4.png")},52683,e=>{"use strict";var t=e.i(43476);let i={src:e.i(13672).default,width:384,height:384,blurWidth:0,blurHeight:0};var l=e.i(71645);function n(){let e=(0,l.useState)(!1)[1];return()=>e(e=>!e)}class r{v;refresh=()=>{throw Error("Refresh not bind!")};constructor(e){this.v=e}bind(e){if(e){let t=n();this.refresh=()=>{e(),t()}}else this.refresh=n()}get value(){return this.v}set value(e){this.v=e,this.refresh?.()}}function s(e){return new r(e)}let a={src:e.i(38542).default,width:16,height:16,blurWidth:0,blurHeight:0},u=0,o=!1;function c(){return k.bind(),(0,t.jsxs)("div",{className:"flex items-center text-2xl",children:[(0,t.jsx)("img",{width:"40",height:"40",src:a.src}),`${d(Math.floor(k.value/60))}:${d(k.value%60)}`]})}function d(e){return`${e<10?"0":""}${e}`}let f={};function v(e){if(e){let[t,i]=x(e);T.value=function(e,t){let i;do i=h();while("mine"===i[e][t].value)return i}(t,i),setTimeout(()=>g(T.value[t][i]))}else T.value=h();O.isFirstTime=!0,N.value="playing",k.value=u=0,o=!1,p()}function h(){var e;let t=Array.from({length:O.rows},()=>Array.from({length:O.cols},()=>({value:0,isFlagged:!1,isOpened:!1})));return(e=t=function(e){for(let t=0;t<O.totalMines;){let i=A(O.rows),l=A(O.cols);"mine"!==e[i][l].value&&(e[i][l].value="mine",t++)}return e}(t)).map((t,i)=>{t.map((l,n)=>{if("mine"!==l.value){let r=0;w.map(([l,s])=>{let a=i+l,u=n+s;a in e&&u in t&&"mine"===e[a][u].value&&r++}),r>0&&(l.value=r)}})}),t=e}function m(e){for(let t of T.value)for(let i of t)"mine"===i.value&&(i.isOpened=!0,e&&(i.hightlight="bg-[green]"))}function g(e){if(!function e(t){if(!t){if(o)return;o=!0,u=b()}if(!o)return;let i=b()-u;k.value=Math.floor(i),setTimeout(()=>e(!0),(k.value-i+1)*1e3)}(),"mine"===e.value){if(O.isFirstTime)return v(e);f.gameOver.play(),e.isOpened=!0,e.hightlight="bg-[red]",N.value="lose",m(!1)}else(e.value,e.value)?(f.revealNumber.play(),e.isOpened=!0):e.value||(f.revealEmpty.play(),function(e){let t,i=[x(e)];for(;t=i.shift();){let[e,l]=t,n=T.value[e][l];if(n.isOpened=!0,!n.value)for(let[t,n]of w){let r=e+t,s=l+n;r in T.value&&s in T.value[0]&&!T.value[r][s].isOpened&&!T.value[r][s].isFlagged&&i.push([r,s])}}}(e)),function(){let e=0;for(let t of T.value)for(let i of t)!i.isOpened&&e++;return e===O.totalMines}()&&(f.gameWin.play(),m(!0),N.value="win");O.isFirstTime=!1,T.refresh?.()}function p(){let e=0;for(let t of T.value)for(let i of t)"mine"===i.value&&e++,i.isFlagged&&e--;C.value=e}function x(e){let t=T.value.flat().findIndex(t=>t===e);return[Math.floor(t/O.cols),t%O.cols]}function b(){return performance.now()/1e3}function A(e){return Math.floor(Math.random()*e)}window.oncontextmenu=e=>e.preventDefault(),function(){class e extends Audio{constructor(e){super(e),this.load()}play(){this.currentTime=0,super.play()}}for(let t of["revealEmpty","revealNumber","flagPlace","flagRemove","gameOver","gameWin"])f[t]=new e(`${location.pathname}/sfx/${t}.wav`)}();let y=[null,"text-[blue]","text-[green]","text-[tomato]","text-[darkviolet]","text-[darkred]","text-[steelblue]","text-[black]","text-[black]"],w=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],j={easy:{rows:9,cols:9,totalMines:10},medium:{rows:16,cols:16,totalMines:40},expert:{rows:16,cols:30,totalMines:99}},O={isFirstTime:!0,...j.easy},N=s("playing"),F=s("easy"),k=s(0),C=s(O.totalMines),T=s(h());function M(){return(C.bind(),N.bind(()=>{"playing"!==N.value&&(o=!1)}),"win"===N.value)?(0,t.jsx)("div",{children:"Wygrałeś!"}):"lose"===N.value?(0,t.jsx)("div",{children:"Koniec gry!"}):(0,t.jsxs)("div",{className:"flex items-center text-2xl",children:[(0,t.jsx)("img",{width:"40",height:"40",src:i.src}),C.value]})}function z(){return(0,t.jsxs)("header",{className:"flex justify-between items-center py-2 font-semibold text-md gap-1",children:[(0,t.jsx)(M,{}),(0,t.jsx)("button",{className:"px-3 py-1 bg-zinc-900 text-zinc-50 rounded-md cursor-pointer",onClick:()=>v(),children:"Nowa gra"}),(0,t.jsx)(c,{})]})}let E=function(){for(var e,t,i=0,l="",n=arguments.length;i<n;i++)(e=arguments[i])&&(t=function e(t){var i,l,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t)if(Array.isArray(t)){var r=t.length;for(i=0;i<r;i++)t[i]&&(l=e(t[i]))&&(n&&(n+=" "),n+=l)}else for(l in t)t[l]&&(n&&(n+=" "),n+=l);return n}(e))&&(l&&(l+=" "),l+=t);return l},D={src:e.i(51633).default,width:64,height:64,blurWidth:8,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAvUlEQVR42qXKMQqCUAAAUIugloamhhAdBN1DF3HXoIYu4CU6RdCUg55AEBeHZhdtcG0xxMFUkELQUPyE+iMDh9aGtz0EADA+qeoud13i5XkYsCwa2DZdR9EcNs0Aadt26CrKPua4S8wwbkRR94+HKKpNlk27cJWkY4Ci8LZY9BKePzdpOvsGWT4EOA5CDKsikkxDgsgTQbD64DnO5qnr29IwVsBxlpVpsqWmrduimHTB9322rusRhBD59X94A0o+rOTx2VW7AAAAAElFTkSuQmCC"};function R({cell:e}){return(0,t.jsxs)("div",{className:E("w-[4.5vh] h-[4.5vh] border border-zinc-600 flex justify-center items-center text-[3vh] font-bold cursor-default relative","number"==typeof e.value&&y[e.value],!e.isOpened&&"bg-zinc-300 border-4 border-t-zinc-200 border-l-zinc-200 border-r-zinc-400 border-b-zinc-400 shadow-sm",!e.isOpened&&"easy"===F.value&&"border-6","mine"===e.value&&e.hightlight,"easy"===F.value&&"w-[8vh] h-[8vh] text-[5.33vh]",!e.isOpened&&"cursor-pointer"),onClick:()=>{"lose"!==N.value&&!e.isOpened&&!e.isFlagged&&g(e)},onContextMenu:()=>{"playing"!==N.value||e.isOpened||(0!==C.value||e.isFlagged)&&(e.isFlagged?f.flagPlace.play():f.flagRemove.play(),e.isFlagged=!e.isFlagged,p(),T.refresh?.())},children:[e.isOpened&&"number"==typeof e.value&&e.value||"",e.isOpened&&"mine"===e.value&&(0,t.jsx)("img",{className:"w-[80%] h-[80%]",src:i.src}),!e.isOpened&&e.isFlagged&&(0,t.jsx)("img",{className:"w-[80%] h-[80%]",src:D.src})]})}function U(){return T.bind(),T.value.map((e,i)=>(0,t.jsx)("div",{className:"flex",children:e.map((e,i)=>(0,t.jsx)(R,{cell:e},i))},i))}function K(){return(0,t.jsx)("ul",{className:"flex justify-around",children:Object.keys(j).map(e=>(0,t.jsx)("li",{children:(0,t.jsx)("button",{className:E("mt-2 px-4 py-1 text-zinc-50 font-semibold rounded-md cursor-pointer",F.value===e?"bg-zinc-700":"bg-zinc-900"),onClick:()=>{Object.assign(O,j[e]),F.value=e},children:e})},e))})}function W(){return F.bind(v),(0,t.jsxs)("main",{className:"py-2 px-6 bg-zinc-300 rounded-2xl w-fit m-auto",children:[(0,t.jsx)(z,{}),(0,t.jsx)(U,{}),(0,t.jsx)(K,{})]})}function B(){if(function(){let[e,t]=(0,l.useState)(!1);return(0,l.useEffect)(()=>t(!0),[e]),e}())return(0,t.jsx)(W,{})}e.s(["default",()=>B],52683)}]);