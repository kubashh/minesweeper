(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{34:(e,t,l)=>{Promise.resolve().then(l.bind(l,6507))},6507:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>x});var n=l(5155),r=l(2115);let s=function(){for(var e,t,l=0,n="",r=arguments.length;l<r;l++)(e=arguments[l])&&(t=function e(t){var l,n,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var s=t.length;for(l=0;l<s;l++)t[l]&&(n=e(t[l]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}(e))&&(n&&(n+=" "),n+=t);return n},i=[null,"text-[blue]","text-[green]","text-[tomato]","text-[darkviolet]","text-[darkred]","text-[steelblue]","text-[black]","text-[black]"],o=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],a={easy:{rows:9,cols:9,totalMines:10},medium:{rows:16,cols:16,totalMines:40},expert:{rows:16,cols:30,totalMines:99}},u="easy";function c(e){let{cell:t,rowIndex:l,colIndex:r,handleCellLeftClick:o,level:a}=e;return(0,n.jsxs)("div",{className:s("w-8 h-8 border-1 border-zinc-600 flex justify-center items-center text-2xl font-bold cursor-default relative","number"==typeof t.value&&i[t.value],!t.isOpened&&"bg-[#ccc] border-3 border-t-[#eee] border-l-[#eee] border-r-[#aaa] border-b-[#aaa] shadow-sm","mine"===t.value&&t.hightlight,"easy"===a&&"w-12 h-12 text-4xl"),onClick:()=>o(l,r),children:[t.isOpened&&"number"==typeof t.value&&t.value||"",t.isOpened&&"mine"===t.value&&(0,n.jsx)("img",{className:"w-[80%] h-[80%]",src:"/icons/bomb.svg"}),t.isFlagged&&(0,n.jsx)("img",{className:"w-[80%] h-[80%]",src:"/icons/red-flag.png"})]})}function f(e){let{board:t,handleCellLeftClick:l,level:r}=e,s=0;return(0,n.jsx)("div",{children:t.map((e,t)=>(s++,(0,n.jsx)("div",{className:"flex",children:e.map((e,i)=>(s++,(0,n.jsx)(c,{cell:e,handleCellLeftClick:l,rowIndex:t,colIndex:i,level:r},s)))},s)))})}function d(e){return Math.floor(Math.random()*e)}function h(e,t,l){let n=function(e,t){let l=[];for(let n=0;n<e;n++){l[n]=[];for(let e=0;e<t;e++)l[n][e]={value:null,isFlagged:!1,isOpened:!1}}return l}(e,t);for(let r=0;r<l;){let l=d(e),s=d(t);"mine"!==n[l][s].value&&(n[l][s].value="mine",r++)}return n.forEach((e,t)=>{e.forEach((l,r)=>{if("mine"!==l.value){let s=0;o.forEach(l=>{let[i,o]=l,a=t+i,u=r+o;a in n&&u in e&&"mine"===n[a][u].value&&s++}),s>0&&(l.value=s)}})}),n}function m(e,t){for(let l of e)for(let e of l)"mine"===e.value&&(e.isOpened=!0,t&&(e.hightlight="bg-[green]"))}function v(e){let{level:t,setLevel:l}=e;return(0,n.jsx)("ul",{className:"flex justify-around",children:Object.keys(a).map(e=>(0,n.jsx)("li",{children:(0,n.jsx)("button",{className:"mt-2 px-4 py-1 bg-zinc-800 text-zinc-50 rounded-md cursor-pointer",onClick:()=>l(e),children:e})},e))})}function x(){let{level:e,setLevel:t,board:l,handleCellLeftClick:s}=function(){let[e,t]=(0,r.useState)(u),l=a[e],[n,s]=(0,r.useState)(h(a[u].rows,a[u].cols,a[u].totalMines)),[i,c]=(0,r.useState)("");return(0,r.useEffect)(()=>void(c(""),s(h(l.rows,l.cols,l.totalMines))),[e]),{board:n,handleCellLeftClick:function(t,l){if("lose"===i||n[t][l].isOpened||n[t][l].isFlagged)return;let r=JSON.parse(JSON.stringify(n)),u=r[t][l],f="mine"===u.value,d=typeof u.value&&!!u.value,h=!u.value;f?(u.isOpened=!0,c("lose"),u.hightlight="bg-[red]",m(r,!1)):(d?u.isOpened=!0:h&&function(e,t,l,n,r){let s=[[n,r]];for(;s.length>0;){let t=s.shift();if(!t)return;let[l,n]=t,r=e[l][n];if(r.isOpened=!0,!r.value)for(let[t,r]of o){let i=l+t,o=n+r;console.log(i,o),i in e&&o in e[0]&&!e[i][o].isOpened&&!e[i][o].isFlagged&&s.push([i,o])}}}(r,a[e].rows,a[e].cols,t,l),function(e,t){let l=0;for(let t of e)for(let e of t)!e.isOpened&&l++;return console.log(l,10),10===l}(r,10)&&(c("win"),m(n,!0))),s(r)},level:e,setLevel:t}}(),[i,c]=(0,r.useState)(!1);if((0,r.useEffect)(()=>c(!0)),i)return(0,n.jsxs)("main",{className:"py-2 px-6 bg-[#ccc] rounded-2xl w-fit m-auto",children:[(0,n.jsx)(f,{board:l,handleCellLeftClick:s,level:e}),(0,n.jsx)(v,{level:e,setLevel:t})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(34)),_N_E=e.O()}]);