(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,49363,e=>{e.v("/minesweeper/_next/static/media/bomb.8b152eb2.svg")},84122,e=>{e.v("/minesweeper/_next/static/media/timer.10359921.svg")},50847,e=>{e.v("/minesweeper/_next/static/media/redFlag.acbdf8b4.png")},52683,e=>{"use strict";e.s(["default",()=>G],52683);var t=e.i(43476);let l={src:e.i(49363).default,width:384,height:384,blurWidth:0,blurHeight:0};function n(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}var i=e.i(71645);function r(){let e=(0,i.useState)(!1)[1];return()=>e(e=>!e)}class a{bind(e){if(e){let t=r();this.refresh=()=>{e(),t()}}else this.refresh=r()}get value(){return this.v}set value(e){var t;this.v=e,null==(t=this.refresh)||t.call(this)}constructor(e){n(this,"v",void 0),n(this,"refresh",()=>{throw Error("Refresh not bind!")}),this.v=e}}function s(e){return new a(e)}let u={src:e.i(84122).default,width:16,height:16,blurWidth:0,blurHeight:0},o=0,c=!1;function d(e){return"".concat(e<10?"0":"").concat(e)}function f(){return C.bind(),(0,t.jsxs)("div",{className:"flex items-center text-2xl",children:[(0,t.jsx)("img",{width:"40",height:"40",src:u.src}),"".concat(d(Math.floor(C.value/60)),":").concat(d(C.value%60))]})}let v={REVEAL_EMPTY:"revealEmpty.wav",REVEAL_NUMBER:"revealNumber.wav",FLAG_PLACE:"flagPlace.wav",FLAG_REMOVE:"flagRemove.wav",GAME_OVER:"gameOver.wav",GAME_WIN:"gameWin.wav"},h={};for(let e in window.oncontextmenu=e=>e.preventDefault(),v)h[e]=new Audio("".concat(location.pathname,"/sfx/").concat(v[e])),h[e].load();function g(e){let t=h[e];t.pause(),t.currentTime=0,t.play()}function m(){return performance.now()/1e3}function x(e){return Math.floor(Math.random()*e)}function b(){let{rows:e,cols:t,totalMines:l}=M[R.value],n=function(){let{rows:e,cols:t}=M[R.value],l=[];for(let n=0;n<e;n++){l[n]=[];for(let e=0;e<t;e++)l[n][e]={value:0,isFlagged:!1,isOpened:!1}}return l}();for(let i=0;i<l;){let l=x(e),r=x(t);"mine"!==n[l][r].value&&(n[l][r].value="mine",i++)}return n.forEach((e,t)=>{e.forEach((l,i)=>{if("mine"!==l.value){let r=0;O.forEach(l=>{let[a,s]=l,u=t+a,o=i+s;u in n&&o in e&&"mine"===n[u][o].value&&r++}),r>0&&(l.value=r)}})}),n}function p(e){for(let t of F.value)for(let l of t)"mine"===l.value&&(l.isOpened=!0,e&&(l.hightlight="bg-[green]"))}function A(e){var t;let l=!c;if(c||function e(t){t||(c=!0,o=m());let l=m()-o;C.value=Math.floor(l),o||(C.value=0),c&&setTimeout(()=>e(!0),(C.value-l+1)*1e3)}(),"mine"===e.value){if(l)return E(e);g("GAME_OVER"),e.isOpened=!0,e.hightlight="bg-[red]",N.value="lose",p(!1)}else(e.value,e.value)?(g("REVEAL_NUMBER"),e.isOpened=!0):e.value||(g("REVEAL_EMPTY"),function(e){let t,l=[y(e)];for(;t=l.shift();){let[e,n]=t,i=F.value[e][n];if(i.isOpened=!0,!i.value)for(let[t,i]of O){let r=e+t,a=n+i;r in F.value&&a in F.value[0]&&!F.value[r][a].isOpened&&!F.value[r][a].isFlagged&&l.push([r,a])}}}(e)),function(){let e=0;for(let t of F.value)for(let l of t)!l.isOpened&&e++;return e===M[R.value].totalMines}()&&(g("GAME_WIN"),p(!0),N.value="win");null==(t=F.refresh)||t.call(F)}function w(){let e=0;for(let t of F.value)for(let l of t)"mine"===l.value&&e++,l.isFlagged&&e--;k.value=e}function E(e){if(e){let[t,l]=y(e);F.value=function(e,t){let l=b();for(;"mine"===l[e][t].value;)l=b();return l}(t,l),setTimeout(()=>A(F.value[t][l]))}else F.value=b();N.value="playing",o=0,c=!1,w()}function y(e){let{rows:t,cols:l}=M[R.value];for(let n=0;n<t;n++)for(let t=0;t<l;t++)if(F.value[n][t]===e)return[n,t];throw Error("No such cell!")}let j=[null,"text-[blue]","text-[green]","text-[tomato]","text-[darkviolet]","text-[darkred]","text-[steelblue]","text-[black]","text-[black]"],O=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],M={easy:{rows:9,cols:9,totalMines:10},medium:{rows:16,cols:16,totalMines:40},expert:{rows:16,cols:30,totalMines:99}},N=s("playing"),R=s("easy"),C=s(0),k=s(M.easy.totalMines),F=s(b());function z(){return(k.bind(),N.bind(()=>{"playing"!==N.value&&(c=!1)}),"win"===N.value)?(0,t.jsx)("div",{children:"Wygrałeś!"}):"lose"===N.value?(0,t.jsx)("div",{children:"Koniec gry!"}):(0,t.jsxs)("div",{className:"flex items-center text-2xl",children:[(0,t.jsx)("img",{width:"40",height:"40",src:l.src}),k.value]})}function T(){return(0,t.jsxs)("header",{className:"flex justify-between items-center py-2 font-semibold text-md gap-1",children:[(0,t.jsx)(z,{}),(0,t.jsx)("button",{className:"px-3 py-1 bg-zinc-900 text-zinc-50 rounded-md cursor-pointer",onClick:()=>E(),children:"Nowa gra"}),(0,t.jsx)(f,{})]})}let U=function(){for(var e,t,l=0,n="",i=arguments.length;l<i;l++)(e=arguments[l])&&(t=function e(t){var l,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t)){var r=t.length;for(l=0;l<r;l++)t[l]&&(n=e(t[l]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}(e))&&(n&&(n+=" "),n+=t);return n},_={src:e.i(50847).default,width:64,height:64,blurWidth:8,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAvUlEQVR42qXKMQqCUAAAUIugloamhhAdBN1DF3HXoIYu4CU6RdCUg55AEBeHZhdtcG0xxMFUkELQUPyE+iMDh9aGtz0EADA+qeoud13i5XkYsCwa2DZdR9EcNs0Aadt26CrKPua4S8wwbkRR94+HKKpNlk27cJWkY4Ci8LZY9BKePzdpOvsGWT4EOA5CDKsikkxDgsgTQbD64DnO5qnr29IwVsBxlpVpsqWmrduimHTB9322rusRhBD59X94A0o+rOTx2VW7AAAAAElFTkSuQmCC"};function D(e){let{cell:n}=e;return(0,t.jsxs)("div",{className:U("w-9 h-9 border-1 border-zinc-600 flex justify-center items-center text-2xl font-bold cursor-default relative","number"==typeof n.value&&j[n.value],!n.isOpened&&"bg-zinc-300 border-3 border-t-zinc-200 border-l-zinc-200 border-r-zinc-400 border-b-zinc-400 shadow-sm",!n.isOpened&&"easy"===R.value&&"border-5","mine"===n.value&&n.hightlight,"easy"===R.value&&"w-16 h-16 text-4xl",!n.isOpened&&"cursor-pointer"),onClick:()=>{"lose"!==N.value&&!n.isOpened&&!n.isFlagged&&A(n)},onContextMenu:()=>{var e,t;return e=n,void("playing"===N.value&&!e.isOpened&&(0!==k.value||e.isFlagged)&&(e.isFlagged,g("FLAG_REMOVE"),e.isFlagged=!e.isFlagged,w(),null==(t=F.refresh)||t.call(F)))},children:[n.isOpened&&"number"==typeof n.value&&n.value||"",n.isOpened&&"mine"===n.value&&(0,t.jsx)("img",{className:"w-[80%] h-[80%]",src:l.src}),!n.isOpened&&n.isFlagged&&(0,t.jsx)("img",{className:"w-[80%] h-[80%]",src:_.src})]})}function V(){return F.bind(),F.value.map((e,l)=>(0,t.jsx)("div",{className:"flex",children:e.map((e,l)=>(0,t.jsx)(D,{cell:e},l))},l))}function L(){return(0,t.jsx)("ul",{className:"flex justify-around",children:Object.keys(M).map(e=>(0,t.jsx)("li",{children:(0,t.jsx)("button",{className:U("mt-2 px-4 py-1 text-zinc-50 font-semibold rounded-md cursor-pointer",R.value===e?"bg-zinc-700":"bg-zinc-900"),onClick:()=>R.value=e,children:e})},e))})}function B(){return R.bind(E),(0,t.jsxs)("main",{className:"py-2 px-6 bg-zinc-300 rounded-2xl w-fit m-auto",children:[(0,t.jsx)(T,{}),(0,t.jsx)(V,{}),(0,t.jsx)(L,{})]})}function G(){if(function(){let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>t(!0),[e]),e}())return(0,t.jsx)(B,{})}}]);