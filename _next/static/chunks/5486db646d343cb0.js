(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,49363,e=>{e.v("/minesweeper/_next/static/media/bomb.8b152eb2.svg")},84122,e=>{e.v("/minesweeper/_next/static/media/timer.10359921.svg")},50847,e=>{e.v("/minesweeper/_next/static/media/redFlag.acbdf8b4.png")},52683,e=>{"use strict";e.s(["default",()=>V],52683);var t=e.i(43476);let l={src:e.i(49363).default,width:384,height:384,blurWidth:0,blurHeight:0};function n(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}var i=e.i(71645);function r(){let e=(0,i.useState)(!1)[1];return()=>e(e=>!e)}class a{bind(e){if(e){let t=r();this.refresh=()=>{e(),t()}}else this.refresh=r()}get value(){return this.v}set value(e){var t;this.v=e,null==(t=this.refresh)||t.call(this)}constructor(e){n(this,"v",void 0),n(this,"refresh",()=>{throw Error("Refresh not bind!")}),this.v=e}}function s(e){return new a(e)}let u={src:e.i(84122).default,width:16,height:16,blurWidth:0,blurHeight:0},o=0,c=!1;function d(e){return"".concat(e<10?"0":"").concat(e)}function f(){return N.bind(),(0,t.jsxs)("div",{className:"flex items-center text-2xl",children:[(0,t.jsx)("img",{width:"40",height:"40",src:u.src}),"".concat(d(Math.floor(N.value/60)),":").concat(d(N.value%60))]})}let v={};function h(){return performance.now()/1e3}function g(e){return Math.floor(Math.random()*e)}function m(){let{rows:e,cols:t,totalMines:l}=j[M.value],n=function(){let{rows:e,cols:t}=j[M.value],l=[];for(let n=0;n<e;n++){l[n]=[];for(let e=0;e<t;e++)l[n][e]={value:0,isFlagged:!1,isOpened:!1}}return l}();for(let i=0;i<l;){let l=g(e),r=g(t);"mine"!==n[l][r].value&&(n[l][r].value="mine",i++)}return n.forEach((e,t)=>{e.forEach((l,i)=>{if("mine"!==l.value){let r=0;y.forEach(l=>{let[a,s]=l,u=t+a,o=i+s;u in n&&o in e&&"mine"===n[u][o].value&&r++}),r>0&&(l.value=r)}})}),n}function p(e){for(let t of C.value)for(let l of t)"mine"===l.value&&(l.isOpened=!0,e&&(l.hightlight="bg-[green]"))}function x(e){var t;let l=!c;if(c||function e(t){t||(c=!0,o=h());let l=h()-o;N.value=Math.floor(l),o||(N.value=0),c&&setTimeout(()=>e(!0),(N.value-l+1)*1e3)}(),"mine"===e.value){if(l)return A(e);v.GAME_OVER.play(),e.isOpened=!0,e.hightlight="bg-[red]",O.value="lose",p(!1)}else(e.value,e.value)?(v.REVEAL_NUMBER.play(),e.isOpened=!0):e.value||(v.REVEAL_EMPTY.play(),function(e){let t,l=[E(e)];for(;t=l.shift();){let[e,n]=t,i=C.value[e][n];if(i.isOpened=!0,!i.value)for(let[t,i]of y){let r=e+t,a=n+i;r in C.value&&a in C.value[0]&&!C.value[r][a].isOpened&&!C.value[r][a].isFlagged&&l.push([r,a])}}}(e)),function(){let e=0;for(let t of C.value)for(let l of t)!l.isOpened&&e++;return e===j[M.value].totalMines}()&&(v.GAME_WIN.play(),p(!0),O.value="win");null==(t=C.refresh)||t.call(C)}function b(){let e=0;for(let t of C.value)for(let l of t)"mine"===l.value&&e++,l.isFlagged&&e--;R.value=e}function A(e){if(e){let[t,l]=E(e);C.value=function(e,t){let l=m();for(;"mine"===l[e][t].value;)l=m();return l}(t,l),setTimeout(()=>x(C.value[t][l]))}else C.value=m();O.value="playing",N.value=o=0,c=!1,b()}function E(e){let{rows:t,cols:l}=j[M.value];for(let n=0;n<t;n++)for(let t=0;t<l;t++)if(C.value[n][t]===e)return[n,t];throw Error("No such cell!")}window.oncontextmenu=e=>e.preventDefault(),function(){class e extends Audio{play(){this.currentTime=0,super.play()}constructor(e){super(e),this.load()}}let t={REVEAL_EMPTY:"revealEmpty.wav",REVEAL_NUMBER:"revealNumber.wav",FLAG_PLACE:"flagPlace.wav",FLAG_REMOVE:"flagRemove.wav",GAME_OVER:"gameOver.wav",GAME_WIN:"gameWin.wav"};for(let l in t)v[l]=new e("".concat(location.pathname,"/sfx/").concat(t[l]))}();let w=[null,"text-[blue]","text-[green]","text-[tomato]","text-[darkviolet]","text-[darkred]","text-[steelblue]","text-[black]","text-[black]"],y=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],j={easy:{rows:9,cols:9,totalMines:10},medium:{rows:16,cols:16,totalMines:40},expert:{rows:16,cols:30,totalMines:99}},O=s("playing"),M=s("easy"),N=s(0),R=s(j.easy.totalMines),C=s(m());function F(){return(R.bind(),O.bind(()=>{"playing"!==O.value&&(c=!1)}),"win"===O.value)?(0,t.jsx)("div",{children:"Wygrałeś!"}):"lose"===O.value?(0,t.jsx)("div",{children:"Koniec gry!"}):(0,t.jsxs)("div",{className:"flex items-center text-2xl",children:[(0,t.jsx)("img",{width:"40",height:"40",src:l.src}),R.value]})}function k(){return(0,t.jsxs)("header",{className:"flex justify-between items-center py-2 font-semibold text-md gap-1",children:[(0,t.jsx)(F,{}),(0,t.jsx)("button",{className:"px-3 py-1 bg-zinc-900 text-zinc-50 rounded-md cursor-pointer",onClick:()=>A(),children:"Nowa gra"}),(0,t.jsx)(f,{})]})}let _=function(){for(var e,t,l=0,n="",i=arguments.length;l<i;l++)(e=arguments[l])&&(t=function e(t){var l,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t)){var r=t.length;for(l=0;l<r;l++)t[l]&&(n=e(t[l]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}(e))&&(n&&(n+=" "),n+=t);return n},z={src:e.i(50847).default,width:64,height:64,blurWidth:8,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAvUlEQVR42qXKMQqCUAAAUIugloamhhAdBN1DF3HXoIYu4CU6RdCUg55AEBeHZhdtcG0xxMFUkELQUPyE+iMDh9aGtz0EADA+qeoud13i5XkYsCwa2DZdR9EcNs0Aadt26CrKPua4S8wwbkRR94+HKKpNlk27cJWkY4Ci8LZY9BKePzdpOvsGWT4EOA5CDKsikkxDgsgTQbD64DnO5qnr29IwVsBxlpVpsqWmrduimHTB9322rusRhBD59X94A0o+rOTx2VW7AAAAAElFTkSuQmCC"};function L(e){let{cell:n}=e;return(0,t.jsxs)("div",{className:_("w-[4.5vh] h-[4.5vh] border-1 border-zinc-600 flex justify-center items-center text-[3vh] font-bold cursor-default relative","number"==typeof n.value&&w[n.value],!n.isOpened&&"bg-zinc-300 border-4 border-t-zinc-200 border-l-zinc-200 border-r-zinc-400 border-b-zinc-400 shadow-sm",!n.isOpened&&"easy"===M.value&&"border-6","mine"===n.value&&n.hightlight,"easy"===M.value&&"w-[8vh] h-[8vh] text-[5.33vh]",!n.isOpened&&"cursor-pointer"),onClick:()=>{"lose"!==O.value&&!n.isOpened&&!n.isFlagged&&x(n)},onContextMenu:()=>{var e,t;return e=n,void("playing"===O.value&&!e.isOpened&&(0!==R.value||e.isFlagged)&&(e.isFlagged?v.FLAG_PLACE.play():v.FLAG_REMOVE.play(),e.isFlagged=!e.isFlagged,b(),null==(t=C.refresh)||t.call(C)))},children:[n.isOpened&&"number"==typeof n.value&&n.value||"",n.isOpened&&"mine"===n.value&&(0,t.jsx)("img",{className:"w-[80%] h-[80%]",src:l.src}),!n.isOpened&&n.isFlagged&&(0,t.jsx)("img",{className:"w-[80%] h-[80%]",src:z.src})]})}function T(){return C.bind(),C.value.map((e,l)=>(0,t.jsx)("div",{className:"flex",children:e.map((e,l)=>(0,t.jsx)(L,{cell:e},l))},l))}function U(){return(0,t.jsx)("ul",{className:"flex justify-around",children:Object.keys(j).map(e=>(0,t.jsx)("li",{children:(0,t.jsx)("button",{className:_("mt-2 px-4 py-1 text-zinc-50 font-semibold rounded-md cursor-pointer",M.value===e?"bg-zinc-700":"bg-zinc-900"),onClick:()=>M.value=e,children:e})},e))})}function D(){return M.bind(A),(0,t.jsxs)("main",{className:"py-2 px-6 bg-zinc-300 rounded-2xl w-fit m-auto",children:[(0,t.jsx)(k,{}),(0,t.jsx)(T,{}),(0,t.jsx)(U,{})]})}function V(){if(function(){let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>t(!0),[e]),e}())return(0,t.jsx)(D,{})}}]);